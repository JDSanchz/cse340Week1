<!-- account/register.ejs -->
<div class="register_p">
<h1><%= title %></h1>

<%- messages() %>
<% if (errors) { %>
  <ul class="notice">
 <% errors.array().forEach(error => { %>
   <li><%= error.msg %></li>
<%  }) %>
 </ul>
<% } %>

  <form action="/account/register" method="POST">
    <div>
      <label for="firstName">First Name:</label>
      <input type="text" id="firstName" name="account_firstname" required value="<%= locals.account_firstname %>">
    </div>
    <div>
      <label for="lastName">Last Name:</label>
      <input type="text" id="lastName" name="account_lastname" required value="<%= locals.account_lastname %>">
    </div>
    <div>
      <label for="email">Email:</label>
      <input type="email" id="email" name="account_email" required value="<%= locals.account_email %>">
    </div>    
    <div>
      <label for="password">Password:</label>
      <div class="password-wrapper">
        <input type="password" id="password" name="account_password"
          pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
          title="Password must be at least 12 characters long and contain at least one uppercase letter, one number, and one special character." required>
        <button type="button" id="togglePassword">Show</button>
      </div>
    </div>
    <div>
      <button type="submit">Register</button>
    </div>
  </form>

  <p>Already have an account? <a href="/account/login">Log In</a></p>
</div>

<script>
  const togglePasswordBtn = document.getElementById('togglePassword');
  const passwordInput = document.getElementById('password');
  
  togglePasswordBtn.addEventListener('click', () => {
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      togglePasswordBtn.textContent = 'Hide';
    } else {
      passwordInput.type = 'password';
      togglePasswordBtn.textContent = 'Show';
    }
  });
</script>

